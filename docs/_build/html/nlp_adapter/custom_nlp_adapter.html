

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Support Your NLP Platform &mdash; emubot  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="API Reference" href="../api.html" />
    <link rel="prev" title="Rasa" href="rasa.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #5E2028" >
          

          
            <a href="../index.html" class="icon icon-home"> emubot
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration.html">Configuration file</a></li>
</ul>
<p class="caption"><span class="caption-text">Chat Adapters</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../chat_adapter/facebook_messenger.html">Facebook Messenger</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chat_adapter/slack.html">Slack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chat_adapter/your_custom_chat_adapter.html">Support Your Chat Platform</a></li>
</ul>
<p class="caption"><span class="caption-text">Core</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../core/core_overview.html">Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core/interfaces.html">Interceptors</a></li>
</ul>
<p class="caption"><span class="caption-text">NLP platforms</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="dialogflow.html">Dialogflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="snips.html">Snips</a></li>
<li class="toctree-l1"><a class="reference internal" href="rasa.html">Rasa</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Support Your NLP Platform</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#configuration">Configuration</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API Reference</a></li>
</ul>
<p class="caption"><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about_us.html">About Us</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">emubot</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Support Your NLP Platform</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/nlp_adapter/custom_nlp_adapter.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="support-your-nlp-platform">
<span id="custom-nlp-adapter"></span><h1>Support Your NLP Platform<a class="headerlink" href="#support-your-nlp-platform" title="Permalink to this headline">¶</a></h1>
<p>If you want to add another NLP service, you will always need to implement the <code class="code docutils literal notranslate"><span class="pre">NlpAdapter</span></code> interface. You can skip this first section if you are
only interested in exemplar config files and the the technical definition of the format we expect. But first of all, we would like to offer some more explanation
of our inspiration that lead to the current decision-making process inside the framework. So let us start in the beginning</p>
<p>The program you communicate with over some messaging platform is what we call a chatbot. Behind this chatbot, there is a so called <em>agent</em>, which is often
used synonymous to <em>chatbot</em>. And this can be quite fitting: All the information (the definition of which queries shall be answered, which entities are relevant
to them, contextual information, exemplar utterances…) is saved in this agent. But a chatbot can also consist of several agents: especially for larger corporate
chatbots, it is often useful to divide the content (<em>separation of concern</em>) and introduce a hierarchy:
Answering smalltalk queries might be less relevant than answering questions regarding the service you offer. Furthermore you might deploy two chatbots, advising
on two different products. To avoid retraining the same smalltalk queries, you might want to keep them generalized and just plug your smalltalk agent into both
product-specific agents.</p>
<p>Using the framework you can create a hierarchy by using the <code class="code docutils literal notranslate"><span class="pre">executionIndex</span></code> to determine the order of when a request is sent to which agent, and set a
threshold which determines when to accept the response and not send it to another agent using a <code class="code docutils literal notranslate"><span class="pre">minScore</span></code>, the minimal confidence required to accept a result.
Commonly you want to be very certain when asking queries related to your product, which will also receive more training than e.g. smalltalk. This means that setting a
high <code class="code docutils literal notranslate"><span class="pre">minScore</span></code> for product specific agents and a lower one for smalltalk agents can be useful.</p>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>In general, it is useful to extend the existing <code class="code docutils literal notranslate"><span class="pre">NlpConfig</span></code>. The <code class="code docutils literal notranslate"><span class="pre">NlpConfig</span></code> includes</p>
<ol class="arabic simple">
<li><p>a <code class="code docutils literal notranslate"><span class="pre">constructor</span></code> of the class that implemented <code class="code docutils literal notranslate"><span class="pre">NlpAdapter</span></code>,</p></li>
<li><p>a <code class="code docutils literal notranslate"><span class="pre">name</span></code> of the NLP service (used for logging), and</p></li>
<li><p>your <code class="code docutils literal notranslate"><span class="pre">Agents</span></code> where you define all information required for calling the NLP service API and parameters required for the hierarchy.</p></li>
</ol>
<p>Your configuration file should also be extended with the platform-dependent authentication tokens and other variables required to communicate with the messaging API
of your service. Some of these information are part of the <code class="code docutils literal notranslate"><span class="pre">Agent</span></code> type. An agent includes the following information:</p>
<ol class="arabic simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">executionIndex</span></code>: a number to determine the order in which a request is sent to different agents. Only relevant if you use multiple agents, still mandatory to set.
The agent with the lowest <code class="code docutils literal notranslate"><span class="pre">executionIndex</span></code> is called first.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">minScore</span></code>: the default confidence that has to be exceeded to avoid sending the query to the next agent. Can be overwritten/ignored in the second
<cite>Inteceptor&lt;interceptor&gt;</cite>, <code class="code docutils literal notranslate"><span class="pre">nlpToNlp</span></code>.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">token</span></code>: token required to authenticate with your NLP service.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">url</span></code>: the API endpoint you communicate with.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">languageCode</span></code>: the language code of your agent. The format might differ between NLP services.</p></li>
</ol>
<p>Depending on the platform you use, it might also be necessary to set other information like</p>
<ol class="arabic simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">project_id</span></code>: project ID of your agent (e.g. GCP ID for Dialogflow), or</p></li>
<li><p>the <code class="code docutils literal notranslate"><span class="pre">defaultLifespan</span></code> of your agents, defining how long a conversation context should last.</p></li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../api.html" class="btn btn-neutral float-right" title="API Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="rasa.html" class="btn btn-neutral float-left" title="Rasa" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, eMundo GmbH

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>